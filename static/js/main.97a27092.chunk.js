(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,a,t){},113:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(7),o=t.n(l),c=(t(86),t(27)),i=t.n(c),s=t(43),u=t(47),m=t(72),d=t(36),p=t(23),v=t(40),E=t(37),b=t(39),O=t(44),h=t.n(O),f={PROVIDER_URL:"https://bicon.net.solidwallet.io/api/v3",NID:"0x3",CONTRACT_ADDRESS:"cx21788f6f76369f9ba61a4e16216abcf86af87d3a"},D=new O.HttpProvider(f.PROVIDER_URL),g=new h.a(D),y=O.IconBuilder.CallBuilder,S=O.IconBuilder.CallTransactionBuilder,w={iconService:g,callBuild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.from,t=e.methodName,n=e.to,r=e.params,l=void 0===r?{}:r;return(new y).from(a).to(n).method(t).params(l).build()},sendTxBuild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.from,t=e.to,n=e.methodName,r=e.params,l=void 0===r?{}:r,o=e.networkId,c=void 0===o?f.NID:o,i=e.stepLimit,s=void 0===i?"0x493e0":i,u=e.value,m=void 0===u?"0x0":u;return{jsonrpc:"2.0",method:"icx_sendTransaction",params:(new S).nid(c).from(a).to(t).stepLimit(s).value(m).timestamp("0x".concat((1e3*(new Date).getTime()).toString(16))).method(n).params(l).version("0x3").build(),id:1}}},B=t(48),k={getAddress:function(){return new Promise(function(e){window.addEventListener("ICONEX_RELAY_RESPONSE",function a(t){var n=t.detail,r=n.type,l=n.payload;"RESPONSE_ADDRESS"===r&&e(l),window.removeEventListener("ICONEX_RELAY_RESPONSE",a)}),window.dispatchEvent(new CustomEvent("ICONEX_RELAY_REQUEST",{detail:{type:"REQUEST_ADDRESS"}}))})},sendTransaction:function(e){return new Promise(function(a){window.addEventListener("ICONEX_RELAY_RESPONSE",function e(t){var n=t.detail,r=n.type,l=n.payload;"RESPONSE_JSON-RPC"===r&&a(l.result),window.removeEventListener("ICONEX_RELAY_RESPONSE",e)}),window.dispatchEvent(new CustomEvent("ICONEX_RELAY_REQUEST",{detail:{type:"REQUEST_JSON-RPC",payload:e}}))})}},_=t(118),N=t(151),T=t(154),A=t(149),L=Object(A.a)(_.a)({padding:"0 16px 0 16px",textAlign:"center",justifyContent:"center",flexWrap:"wrap",position:"fixed",top:-8,background:"rgba(243, 243, 243, 0.93)"}),R=Object(A.a)(T.a)({margin:8,fontSize:28,marginTop:-8,marginBottom:3}),x={fontSize:10,fontWeight:500,color:"#555"},C=function(e){function a(){return Object(d.a)(this,a),Object(v.a)(this,Object(E.a)(a).apply(this,arguments))}return Object(b.a)(a,e),Object(p.a)(a,[{key:"render",value:function(){var e=this.props.curBlockHeight||"\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7";return r.a.createElement(L,{elevation:0},r.a.createElement("label",{style:x},"Current Block"),r.a.createElement(R,{className:"lato-100","aria-label":"Breadcrumb"},r.a.createElement(N.a,{color:"inherit",href:"#"},e)))}}]),a}(n.Component),j=t(153),I=t(66),M={MODE:{LOG_OUT:"LOG_OUT",LOG_IN:"LOG_IN",BDAY_SET:"BDAY_SET"},LABEL:[{value:"00",label:"\uc2dc\ud5d8"},{value:"01",label:"\uace0\ubc31"},{value:"02",label:"\uc0dd\uc77c"},{value:"03",label:"\uc878\uc5c5"},{value:"04",label:"\uc785\ud559"},{value:"05",label:"\ubc29\ud559"},{value:"06",label:"\uc81c\ub300"},{value:"07",label:"\uc6b0\ub9ac\uc544\uae30 \ucd9c\uc0b0"},{value:"08",label:"\uc5b4\uba38\ub2c8 \uc0dd\uc2e0"},{value:"09",label:"\uc544\ubc84\uc9c0 \uc0dd\uc2e0"},{value:"10",label:"\ub0a8\uce5c \uc0dd\uc77c"},{value:"11",label:"\uc5ec\uce5c \uc0dd\uc77c"},{value:"12",label:"\uc774\ubcc4..."},{value:"13",label:"\ud604\ud53c"},{value:"14",label:"\ud1f4\uc0ac"},{value:"15",label:"\uc774\uc9c1"},{value:"16",label:"\uc5ec\ud589"},{value:"17",label:"\uc0c1\uacac\ub840"},{value:"18",label:"\uacb0\ud63c\uc2dd"},{value:"19",label:"\uc0c1\uc0ac \uc7a5\ub840\uc2dd"},{value:"20",label:"\ub85c\ub610 \ub2f9\ucca8"},{value:"21",label:"\uc778\uc0dd \ud558\uc9c1"}]},P=Object(I.a)(function(e){return{button:{margin:e.spacing(1),paddingTop:e.spacing(2),paddingBottom:e.spacing(2),paddingLeft:e.spacing(5),paddingRight:e.spacing(5)},input:{display:"none"}}});var Y=function(e){var a=e.mode,t=e.buttonClick,n=P(),l="",o="outlined";switch(a){case M.MODE.LOG_OUT:l="ICONex \uc5f0\ub3d9\ud558\uae30";break;case M.MODE.LOG_IN:o="contained",l="B-Day \uc124\uc815\ud558\uae30";break;case M.MODE.BDAY_SET:l="B-day \uc7ac\uc124\uc815\ud558\uae30"}return r.a.createElement(j.a,{onClick:t,variant:o,color:"primary",className:n.button},l)},U=t(152),G=Object(A.a)(U.a)({marginLeft:8,marginRight:8}),H=function(e){function a(){return Object(d.a)(this,a),Object(v.a)(this,Object(E.a)(a).apply(this,arguments))}return Object(b.a)(a,e),Object(p.a)(a,[{key:"render",value:function(){var e=this.props,a=e.inputData,t=e.setInputData,n=e.curBlockHeight;return r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},r.a.createElement(G,{select:!0,label:"B-Day",placeholder:"",value:a.label,onChange:t("label"),SelectProps:{native:!0,MenuProps:{style:{width:200}}},helperText:"\uc5b4\ub5a4 \ub0a0\uc778\uac00\uc694?",margin:"normal",variant:"outlined"},M.LABEL.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})),r.a.createElement(G,{label:"Block Height",placeholder:n,value:a.BDay,onChange:t("BDay"),helperText:"\ube14\ub85d \uac12\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",margin:"normal",variant:"outlined"}))}}]),a}(n.Component),W=function(e){var a=e.mode,t=e.myData,n=e.curBlockHeight,l=t.BDay-n;console.log(l);var o=l>0?"-":"+";return a!==M.MODE.BDAY_SET?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"logo lato-100"},"B",r.a.createElement("b",null,"-"),"DAY"),r.a.createElement("p",{className:"desc lato-100"},"How many blocks until your red-letter day?")):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"logo small"},M.LABEL[Number(t.label)].label,r.a.createElement("span",{className:"lato-100"}," \uae4c\uc9c0")),r.a.createElement("p",{className:"bday lato-100"},"B",o,Math.abs(l)),r.a.createElement("em",{className:"div"},"-"))},X=(t(112),function(e){function a(e){var t;return Object(d.a)(this,a),(t=Object(v.a)(this,Object(E.a)(a).call(this,e))).setInputData=function(e){return function(a){t.setState({inputData:Object(m.a)({},t.state.inputData,Object(u.a)({},e,a.target.value))})}},t.buttonClick=function(){switch(t.state.mode){case M.MODE.LOG_OUT:t.getAddress();break;case M.MODE.LOG_IN:case M.MODE.BDAY_SET:t.sendTransaction()}},t.getAddress=Object(s.a)(i.a.mark(function e(){var a,n,r,l,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=w.iconService,n=w.callBuild,r=t.props.enqueueSnackbar,e.next=4,k.getAddress();case 4:return l=e.sent,e.next=7,a.call(n({from:l,methodName:"getBDay",params:{},to:f.CONTRACT_ADDRESS})).execute();case 7:o=e.sent,t.setState({mode:o?M.MODE.BDAY_SET:M.MODE.LOG_IN,myAddress:l,myData:o?{label:o.slice(0,2),BDay:o.slice(2)}:{}}),r("Hello, ".concat(l,"."),{variant:"success"});case 10:case"end":return e.stop()}},e)})),t.sendTransaction=Object(s.a)(i.a.mark(function e(){var a,n,r,l,o,c,s,u,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.iconService,a=w.sendTxBuild,n=t.state,r=n.inputData,l=n.myAddress,o=t.props.enqueueSnackbar,e.prev=3,c=r.label,s=r.BDay,u=a({from:l,to:f.CONTRACT_ADDRESS,methodName:"setBDay",params:{_lable_height:"".concat(c).concat(s)}}),e.next=8,k.sendTransaction(u);case 8:m=e.sent,console.log(m),t.setState({mode:M.MODE.BDAY_SET,myData:{label:c,BDay:s}}),o("Congratulations, Your B-Day is set!",{variant:"success"}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),o("Failed for some reason!",{variant:"error"});case 17:case"end":return e.stop()}},e,null,[[3,14]])})),t.blockTimer=null,t.state={mode:M.MODE.LOG_OUT,myAddress:"",myData:{label:"",BDay:""},inputData:{label:"00",BDay:"0"},curBlockHeight:0},t}return Object(b.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(i.a.mark(function e(){var a=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.blockTimer=setInterval(Object(s.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.iconService.getLastBlock().execute();case 2:t=e.sent,n=t.height,a.setState({curBlockHeight:n});case 5:case"end":return e.stop()}},e)})),2e3);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.blockTimer)}},{key:"render",value:function(){console.log(this.state.inputData);var e=this.state.mode;return r.a.createElement("div",{className:"App"},r.a.createElement("section",{className:"main"},r.a.createElement(C,this.state),r.a.createElement(W,this.state),r.a.createElement("div",{style:{minHeight:100}},e!==M.MODE.LOG_OUT&&r.a.createElement(H,Object.assign({},this.state,{setInputData:this.setInputData}))),r.a.createElement(Y,Object.assign({},this.state,{buttonClick:this.buttonClick}))))}}]),a}(n.Component)),J=Object(B.withSnackbar)(X);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=t(148),F=t(46),q=Object(F.a)({palette:{primary:{main:"#f9f9f9"}}});o.a.render(r.a.createElement(Q.a,{theme:q},r.a.createElement(B.SnackbarProvider,{maxSnack:3},r.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},81:function(e,a,t){e.exports=t(113)},86:function(e,a,t){}},[[81,1,2]]]);
//# sourceMappingURL=main.97a27092.chunk.js.map